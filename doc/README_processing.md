# Инструкция по использованию обработчика сценариев

## Файлы для запуска:

1. **`script_loader.py`** - основной модуль 
2. **`run_processing.py`** - скрипт для обработки 
3. **`example_usage.py`** - базовые примеры использования
4. **`advanced_usage.py`** - продвинутые возможности
5. **`cli_tool.py`** - инструмент командной строки

## Как запустить обработку:

### Способ 1: Автоматический запуск (рекомендуется)
```bash
python run_processing.py
```

Этот скрипт автоматически ищет файл "_ 1 СЕРИЯ_.pdf" и обрабатывает его.

### Способ 2: Интерактивный запуск
```bash
python -c "from script_loader import ScriptLoader; loader = ScriptLoader(); result = loader.load_script('_ 1 СЕРИЯ_.pdf'); print(f'Найдено сцен: {result[\"text_info\"][\"scene_count\"]}')"
```

### Способ 3: Через командную строку
```bash
python cli_tool.py "_ 1 СЕРИЯ_.pdf"
```

## Что произойдет при запуске:

1. **Проверка файла** - убедимся, что "_ 1 СЕРИЯ_.pdf" существует
2. **Извлечение текста** - из PDF извлекается весь текст
3. **Очистка текста** - удаляются номера страниц, лишние пробелы
4. **Сегментация на сцены** - текст разбивается на сцены по паттернам:
   - INT./EXT./INT/EXT. (интерьер/экстерьер)
   - Номера сцен (1., 2., 3., ...)
   - Служебные команды (FADE IN:, CUT TO:, etc.)
5. **Извлечение метаданных** - для каждой сцены определяется:
   - Локация
   - Тип сцены (интерьер/экстерьер)
   - Количество строк и слов
   - Наличие диалогов
6. **Сохранение результатов** - создаются два файла:
   - `_ 1 СЕРИЯ__processed.json` - структурированные данные
   - `_ 1 СЕРИЯ__analysis.txt` - читаемый анализ

## Ожидаемые результаты:

### JSON файл содержит:
- Информацию о файле (размер, формат)
- Статистику текста (количество символов, сцен)
- Список всех сцен с метаданными
- Временную метку обработки

### Текстовый файл содержит:
- Краткую сводку
- Список всех сцен с анализом
- Содержимое каждой сцены

## Возможные проблемы:

1. **Файл не найден** - убедитесь, что "_ 1 СЕРИЯ_.pdf" в той же папке
2. **Ошибка PDF** - файл может быть отсканированным (только изображения)
3. **Паттерны сцен не найдены** - возможно, формат сценария нестандартный

## Настройка паттернов сцен:

Если сценарии разбиваются неправильно, можно изменить паттерны в `ScriptLoader`:

```python
custom_patterns = [
    r'^\s*(?:INT\.|EXT\.|INT\/EXT\.)',
    r'^\s*\d+\.\s*',
    r'^\s*(?:SCENE\s+\d+)',
    # Добавьте свои паттерны здесь
]

loader = ScriptLoader(scene_patterns=custom_patterns)
```

## Просмотр результатов:

После обработки откройте созданные файлы:
- **JSON** - для программного анализа
- **TXT** - для чтения человеком

Скрипт также выведет краткую статистику в консоль.