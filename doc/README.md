# Script Mapper - –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–∏–Ω–æ—Å—Ü–µ–Ω–∞—Ä–∏–µ–≤

–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏ –∞–Ω–∞–ª–∏–∑–∞ –∫–∏–Ω–æ—Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ –≤ —Ñ–æ—Ä–º–∞—Ç–∞—Ö PDF –∏ DOCX —Å —Ä–∞–∑–±–∏–≤–∫–æ–π –Ω–∞ —Å—Ü–µ–Ω—ã.

## –û–ø–∏—Å–∞–Ω–∏–µ

Script Loader –∏–∑–≤–ª–µ–∫–∞–µ—Ç —Ç–µ–∫—Å—Ç –∏–∑ —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞–∑–±–∏–≤–∞–µ—Ç –∏—Ö –Ω–∞ —Å—Ü–µ–Ω—ã –∏ —Å–æ–∑–¥–∞–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∞–Ω–∞–ª–∏–∑ —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã –∫–∏–Ω–æ—Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ —Å –ø–∞—Ç—Ç–µ—Ä–Ω–∞–º–∏ INT./EXT., –Ω–æ–º–µ—Ä–∞–º–∏ —Å—Ü–µ–Ω –∏ —Å–ª—É–∂–µ–±–Ω—ã–º–∏ –∫–æ–º–∞–Ω–¥–∞–º–∏.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞** –∏–∑ PDF –∏ DOCX —Ñ–∞–π–ª–æ–≤
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–µ–≥–º–µ–Ω—Ç–∞—Ü–∏—è** –Ω–∞ —Å—Ü–µ–Ω—ã
- **–ê–Ω–∞–ª–∏–∑ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö** –∫–∞–∂–¥–æ–π —Å—Ü–µ–Ω—ã
- **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞** –ø–æ —Ç–∏–ø–∞–º —Å—Ü–µ–Ω –∏ –ª–æ–∫–∞—Ü–∏—è–º
- **–≠–∫—Å–ø–æ—Ä—Ç** –≤ JSON –∏ —Ç–µ–∫—Å—Ç–æ–≤–æ–º —Ñ–æ—Ä–º–∞—Ç–µ
- **–ì–∏–±–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞** —á–µ—Ä–µ–∑ .env —Ñ–∞–π–ª—ã
- **–ö–æ–º–∞–Ω–¥–Ω–∞—è —Å—Ç—Ä–æ–∫–∞** –∏ –ø—Ä–æ–≥—Ä–∞–º–º–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
pip install -r requirements_script_loader.txt
```

–ò–ª–∏ –ø–æ –æ—Ç–¥–µ–ª—å–Ω–æ—Å—Ç–∏:
```bash
pip install PyPDF2==3.0.1
pip install pdfplumber==0.10.3  
pip install python-docx==1.1.0
pip install python-dotenv>=1.0.0
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ .env —Ñ–∞–π–ª–∞

–í —Ñ–∞–π–ª–µ `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ —É–∫–∞–∂–∏—Ç–µ:

```bash
# –ü—É—Ç—å –∫ —Ñ–∞–π–ª—É —Å—Ü–µ–Ω–∞—Ä–∏—è
SCRIPT_FILE = ""

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –≤—ã–≤–æ–¥–∞
OUTPUT_FORMAT = "both"    # json, text, both
OUTPUT_DIR = "processed"  # –ø–∞–ø–∫–∞ –¥–ª—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏
ENABLE_LOGGING = true
VERBOSE_OUTPUT = true
```

### 3. –ó–∞–ø—É—Å–∫ –æ–±—Ä–∞–±–æ—Ç–∫–∏

```bash
python run_processing.py
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
‚îú‚îÄ‚îÄ script_loader.py          # –û—Å–Ω–æ–≤–Ω–æ–π –º–æ–¥—É–ª—å –æ–±—Ä–∞–±–æ—Ç–∫–∏
‚îú‚îÄ‚îÄ run_processing.py         # –°–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å–∫–∞ —Å .env
‚îú‚îÄ‚îÄ quick_test.py             # –¢–µ—Å—Ç —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ .env                      # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ requirements_script_loader.txt  # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îî‚îÄ‚îÄ README.md                       # –≠—Ç–æ—Ç —Ñ–∞–π–ª
```




## üîß –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –°–ø–æ—Å–æ–±—ã –∑–∞–ø—É—Å–∫–∞:

####  –û—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç 
```bash
python run_processing.py
```
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–∑ `.env` —Ñ–∞–π–ª–∞.



### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ —Å—Ü–µ–Ω

–ï—Å–ª–∏ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –∏–º–µ—é—Ç –Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç, –º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–∞—Ç—Ç–µ—Ä–Ω—ã:

```python
custom_patterns = [
    r'^\s*(?:INT\.|EXT\.|INT\/EXT\.)',
    r'^\s*\d+\.\s*',
    r'^\s*(?:SCENE\s+\d+)',
    # –î–æ–±–∞–≤—å—Ç–µ —Å–≤–æ–∏ –ø–∞—Ç—Ç–µ—Ä–Ω—ã
]

loader = ScriptLoader(scene_patterns=custom_patterns)
```

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

### JSON —Ñ–∞–π–ª —Å–æ–¥–µ—Ä–∂–∏—Ç:
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ñ–∞–π–ª–µ (—Ä–∞–∑–º–µ—Ä, —Ñ–æ—Ä–º–∞—Ç)
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —Ç–µ–∫—Å—Ç–∞ (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–∏–º–≤–æ–ª–æ–≤, —Å—Ü–µ–Ω)
- –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Å—Ü–µ–Ω —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏:
  - –ù–æ–º–µ—Ä –∏ –∑–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ü–µ–Ω—ã
  - –õ–æ–∫–∞—Ü–∏—è –∏ —Ç–∏–ø (–∏–Ω—Ç–µ—Ä—å–µ—Ä/—ç–∫—Å—Ç–µ—Ä—å–µ—Ä)
  - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–æ–∫ –∏ —Å–ª–æ–≤
  - –ù–∞–ª–∏—á–∏–µ –¥–∏–∞–ª–æ–≥–æ–≤
  - –°–æ–¥–µ—Ä–∂–∏–º–æ–µ —Å—Ü–µ–Ω—ã
- –í—Ä–µ–º–µ–Ω–Ω—É—é –º–µ—Ç–∫—É –æ–±—Ä–∞–±–æ—Ç–∫–∏

### –¢–µ–∫—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª —Å–æ–¥–µ—Ä–∂–∏—Ç:
- –ö—Ä–∞—Ç–∫—É—é —Å–≤–æ–¥–∫—É –ø–æ —Ñ–∞–π–ª—É
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –æ–±—Ä–∞–±–æ—Ç–∫–∏
- –ü–æ–¥—Ä–æ–±–Ω—ã–π —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Å—Ü–µ–Ω
- –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –∫–∞–∂–¥–æ–π —Å—Ü–µ–Ω—ã

## üéØ –ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞

```
üé¨ –ó–ê–ü–£–°–ö –û–ë–†–ê–ë–û–¢–ö–ò –°–¶–ï–ù–ê–†–ò–Ø
==================================================
üìÑ –§–∞–π–ª: _ 1 –°–ï–†–ò–Ø_.pdf
üìÅ –í—ã—Ö–æ–¥–Ω–∞—è –ø–∞–ø–∫–∞: processed
üìä –§–æ—Ä–º–∞—Ç –≤—ã–≤–æ–¥–∞: both

‚úÖ –û–ë–†–ê–ë–û–¢–ö–ê –ó–ê–í–ï–†–®–ï–ù–ê –£–°–ü–ï–®–ù–û!

üìä –û–°–ù–û–í–ù–ê–Ø –°–¢–ê–¢–ò–°–¢–ò–ö–ê:
   –§–æ—Ä–º–∞—Ç —Ñ–∞–π–ª–∞: .pdf
   –†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞: 339,743 –±–∞–π—Ç
   –°–∏–º–≤–æ–ª–æ–≤ –≤ —Å—ã—Ä–æ–º —Ç–µ–∫—Å—Ç–µ: 53,129
   –°–∏–º–≤–æ–ª–æ–≤ –≤ –æ—á–∏—â–µ–Ω–Ω–æ–º —Ç–µ–∫—Å—Ç–µ: 52,987
   üé≠ –°—Ü–µ–Ω –Ω–∞–π–¥–µ–Ω–æ: 72

üìà –†–ê–°–ü–†–ï–î–ï–õ–ï–ù–ò–ï –ü–û –¢–ò–ü–ê–ú –°–¶–ï–ù:
   –∏–Ω—Ç–µ—Ä—å–µ—Ä: 45 —Å—Ü–µ–Ω
   —ç–∫—Å—Ç–µ—Ä—å–µ—Ä: 18 —Å—Ü–µ–Ω
   –∏–Ω—Ç–µ—Ä—å–µ—Ä/—ç–∫—Å—Ç–µ—Ä—å–µ—Ä: 9 —Å—Ü–µ–Ω

üíæ JSON —Å–æ—Ö—Ä–∞–Ω–µ–Ω: processed\_ 1  –°–ï–†–ò–Ø_.json
üíæ –¢–µ–∫—Å—Ç–æ–≤—ã–π –∞–Ω–∞–ª–∏–∑ —Å–æ—Ö—Ä–∞–Ω–µ–Ω: processed\_ 1  –°–ï–†–ò–Ø__analysis.txt
```

## üîç –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
```bash
python quick_test.py
```

### –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ñ–∞–π–ª–µ
```bash
python quick_test.py info
```

## ‚ö†Ô∏è –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.7+
- PDF –∏–ª–∏ DOCX —Ñ–∞–π–ª—ã —Å —Ç–µ–∫—Å—Ç–æ–≤—ã–º —Å–æ–¥–µ—Ä–∂–∏–º—ã–º
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ —Å –ø–∞—Ç—Ç–µ—Ä–Ω–∞–º–∏:
  - `INT.` / `EXT.` / `INT/EXT.`
  - –ù–æ–º–µ—Ä–∞ —Å—Ü–µ–Ω (`1.`, `2.`, etc.)
  - –°–ª—É–∂–µ–±–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã (`FADE IN:`, `CUT TO:`, etc.)

## üêõ –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### –û—à–∏–±–∫–∞ "–§–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω"
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—É—Ç—å –≤ `.env` —Ñ–∞–π–ª–µ
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ñ–∞–π–ª —Å—É—â–µ—Å—Ç–≤—É–µ—Ç

### –û—à–∏–±–∫–∞ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è —Ç–µ–∫—Å—Ç–∞ –∏–∑ PDF
- –§–∞–π–ª –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—Ç—Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–º (—Ç–æ–ª—å–∫–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è)
- –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –¥—Ä—É–≥–æ–π PDF —Ñ–∞–π–ª

### –°—Ü–µ–Ω—ã –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è –∫–∞–∫ "–Ω–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω"
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º–∞—Ç —Å—Ü–µ–Ω–∞—Ä–∏—è
- –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã –≤ `ScriptLoader()`

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è

–ü—Ä–æ–µ–∫—Ç —Å–æ–∑–¥–∞–Ω –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∫–∏–Ω–æ—Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ –∏ –∞–Ω–∞–ª–∏–∑–∞ –∏—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä—ã.

## ü§ù –í–∫–ª–∞–¥

–î–ª—è —É–ª—É—á—à–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏:
1. –î–æ–±–∞–≤—å—Ç–µ –ø–æ–¥–¥–µ—Ä–∂–∫—É –Ω–æ–≤—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤
2. –£–ª—É—á—à–∏—Ç–µ –∞–ª–≥–æ—Ä–∏—Ç–º—ã –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å—Ü–µ–Ω
3. –î–æ–±–∞–≤—å—Ç–µ –Ω–æ–≤—ã–µ —Ç–∏–ø—ã –∞–Ω–∞–ª–∏–∑–∞

---

**–°–æ–∑–¥–∞–Ω–æ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –∞–Ω–∞–ª–∏–∑–∞ –∫–∏–Ω–æ—Å—Ü–µ–Ω–∞—Ä–∏–µ–≤** üé¨